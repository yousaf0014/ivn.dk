$("form").on('submit', function(e) {
	if((!$('#terms').is(':checked')) && ($("#terms").length!=0)){
   		$('#response').modal('toggle');
		$('#response').modal({
				show: 'true'
				}); 
		$('.response-body').html('<h4 class"text-center">Accepter venligst brugerbetingelserne.</h4>');
			e.preventDefault();
   }else{
    $.ajax({
        type: "POST",
        url: 'libs/handler.php',
        data: new FormData(this), // Data sent to file
        cache: false,
        contentType: false, // The content type used when sending data to the server.
        processData: false,
        beforeSend: function() {
		$('#response').modal('toggle');
		$('#response').modal({
				show: 'true'
		}); 
        $('.response-body').html('<p><img src="assets/images/processing.gif" width="64px" style="width:64px;"/></p><p>Øjeblik</p>');
        },
        success: function(html) {                // alert(html);
          setTimeout(function(){
            var id = $('form').attr('id');
            if(id == 'PensoPay'){
              ga('send', 'event', { eventCategory: 'Tilmeldinger', eventAction: 'tilmelding', eventLabel: id});
            }   
          },3000);
			setTimeout(function(){
                   
				if($('#forget-password').hasClass('in')){
					$('body').addClass('modal-open');
    				
				}
				$('.response-body').html('<h4 class"text-center">'+html+'</h4>');
		}, 500);
			
			}
			
    });
   }
   	
    //stop form submission
    e.preventDefault();
});

$(document).ready(function() {
    $('#password').keyup(function() {
        $('#result').html(checkStrength($('#password').val()))
    })
	$('#confirm_password').keyup(function(e) {
        $('#confirm_result').html(checkSamePassword($('#password').val(), $('#confirm_password').val()));
    });

    function checkStrength(password) {
        var strength = 0
        if (password.length < 8) {
            //$('#result').css("color", "red");
            return 'Minimum otte tegn'
        }
        if (password.length > 7) strength += 1
            // If password contains both lower and uppercase characters, increase strength value.
        if (password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)) strength += 1
            // If it has numbers and characters, increase strength value.
        if (password.match(/([a-zA-Z])/) && password.match(/([0-9])/)) strength += 1
            // If it has one special character, increase strength value.
        if (password.match(/([!,%,&,@,#,$,^,*,?,_,~])/)) strength += 1
            // If it has two special characters, increase strength value.
        if (password.match(/(.*[!,%,&,@,#,$,^,*,?,_,~].*[!,%,&,@,#,$,^,*,?,_,~])/)) strength += 1
            // Calculated strength value, we can return messages
            // If value is less than 2
        if (strength < 2) {
           // $('#result').css("color", "orange");
            return 'Adgangskoden er ok'
        } else if (strength == 2) {
           // $('#result').css("color", "lightgreen");
            return 'God'
        } else {
            //$('#result').css("color", "aqua");
            return 'Adgangskoden er stærk'
        }
    }
	function checkSamePassword(password, confirm_password){
			if(password == confirm_password){
				//$('#confirm_result').css('color','aqua');
				return 'Adgangskoderne er ens';
			}else{
				//$('#confirm_result').css('color','red');
				return 'Adgangskoderne er ikke ens';
			
			}
		
	}
});
$('.modal').on('hidden.bs.modal', function (e) {
    if($('#forget-password').hasClass('in')){
		$('body').addClass('modal-open');
		
    	$('#forget-password').modal('toggle');
	}
});
function preview_avatar(input) {
	var getImagePath = URL.createObjectURL(event.target.files[0]);
 	$('#avatar').css('background-image', 'url(' + getImagePath + ')');
}
jQuery(document).bind('keyup', function(e) {

  if (e.keyCode==39) {
      jQuery('a.carousel-control.right').trigger('click');
  }   

  else if(e.keyCode==37){
      jQuery('a.carousel-control.left').trigger('click');
  }

});
$(".navbar-toggle").on("click", function () {
    $(this).toggleClass("active");
});
$('#confirm-delete').on('click', '.btn-ok', function(e) {
	var $modalDiv = $(e.delegateTarget);
	var id = $(this).data('recordId');
	 $.ajax({
        type: "POST",
        url: 'libs/handler.php',
       	 data: "action="+"DELETE_USER"+"&id="+id,
        cache: false,
        beforeSend: function() {
       		$('#delete-response').html('<p><img src="assets/images/processing.gif" width="64px" style="width:64px;"/></p><p>Øjeblik</p>')
	    },
        success: function(html) {
          $('#delete-response').html('<p>'+html+'</p>')
		}
	});
});
$('#confirm-delete').on('show.bs.modal', function(e) {
	var data = $(e.relatedTarget).data();
	$('.title', this).text(data.recordTitle);
	$('.btn-ok', this).data('recordId', data.recordId);
});
